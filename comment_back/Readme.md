## DRF ModelSerializerì—ì„œ ê´€ê³„ í•„ë“œì˜ ì…ë ¥ê³¼ ê²€ì¦ ê²°ê³¼

### í˜„ìƒ ìš”ì•½

- **ì…ë ¥ ì‹œ**:  
  ê´€ê³„ í•„ë“œ(ì˜ˆ: ForeignKey, OneToOneField, ManyToManyField)ëŠ”  
  **pk(ì •ìˆ˜, id)** ê°’ìœ¼ë¡œ ì…ë ¥ë°›ëŠ”ë‹¤.

- **ê²€ì¦ í›„**:  
  `serializer.is_valid()`ê°€ í˜¸ì¶œë˜ê³  ë‚˜ë©´  
  **validated_data**ì—ëŠ” í•´ë‹¹ pkì— í•´ë‹¹í•˜ëŠ” **ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤(ê°ì²´)**ê°€ ë“¤ì–´ê°„ë‹¤.

---

### ì™œ ì´ëŸ°ê°€?

- DRFì˜ `ModelSerializer`ëŠ” ê´€ê³„ í•„ë“œì— ëŒ€í•´ ë‚´ë¶€ì ìœ¼ë¡œ `PrimaryKeyRelatedField`ë¥¼ ì‚¬ìš©í•œë‹¤.
- ì´ í•„ë“œëŠ” ì…ë ¥ê°’ì´ pkì¼ ë•Œ, ê²€ì¦ ê³¼ì •ì—ì„œ í•´ë‹¹ pkë¡œ DBì—ì„œ ê°ì²´ë¥¼ ì¡°íšŒí•˜ì—¬  
  **validated_dataì— ì‹¤ì œ ëª¨ë¸ ê°ì²´ë¡œ ë³€í™˜**í•´ ì¤€ë‹¤.

---

### ì˜ˆì‹œ ì½”ë“œ

```python
# ì…ë ¥ ì‹œ
serializer = CommentEmotionAnalysisSerializer(data={"comment": 123})

# ê²€ì¦ ì „
serializer.initial_data["comment"]  # 123 (pk)

# ê²€ì¦
serializer.is_valid()

# ê²€ì¦ í›„
serializer.validated_data["comment"]  # <Comment: ...> (Comment ê°ì²´)
```

---

### ì‹œë¦¬ì–¼ë¼ì´ì €ì˜ ê²€ì¦ ì‹œì 

- DRFì—ì„œ ì‹œë¦¬ì–¼ë¼ì´ì €ì˜ ê²€ì¦ì€ **`serializer.is_valid()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ìˆœê°„** ê²°ì •ë©ë‹ˆë‹¤.
- ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì…ë ¥ ë°ì´í„°ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ì™€ ë³€í™˜ì´ í•œ ë²ˆì— ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
- ê²€ì¦ì´ í†µê³¼í•˜ë©´, `serializer.validated_data`ì— ë³€í™˜ëœ(ì˜ˆ: pk â†’ ê°ì²´) ê°’ì´ ì €ì¥ë©ë‹ˆë‹¤.
- ê²€ì¦ì´ ì‹¤íŒ¨í•˜ë©´, `serializer.errors`ì— ì—ëŸ¬ ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤.

**ì •ë¦¬:**

- ì‹œë¦¬ì–¼ë¼ì´ì €ì˜ ê²€ì¦ì€ `is_valid()` í˜¸ì¶œ ì‹œì ì— ì‹¤í–‰ëœë‹¤.
- ì´ë•Œ validated_dataê°€ ì±„ì›Œì§€ê³ , ê´€ê³„ í•„ë“œëŠ” pkì—ì„œ ê°ì²´ë¡œ ë³€í™˜ëœë‹¤.

---

### ê²°ë¡ 

- **ì…ë ¥**: pk ê°’(int)
- **ê²€ì¦ í›„**: ì‹¤ì œ ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤
- ì´ ë™ì‘ì€ DRFì˜ í‘œì¤€ì´ë©°, ê´€ê³„ í•„ë“œì˜ ì¼ê´€ëœ ì²˜ë¦¬ ë°©ì‹ì´ë‹¤.
- ë”°ë¼ì„œ, ì‹œë¦¬ì–¼ë¼ì´ì € ë‚´ë¶€ì—ì„œ validated_data["comment"]ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” í•­ìƒ ê°ì²´ê°€ ë“¤ì–´ì˜¨ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.

---

**ì°¸ê³ :**

- ê³µì‹ ë¬¸ì„œ: [DRF PrimaryKeyRelatedField](https://www.django-rest-framework.org/api-guide/relations/#primarykeyrelatedfield)

![alt text](image-5.png)

## Django API ì„±ëŠ¥ ê°œì„ : 6ì´ˆì—ì„œ 300msë¡œ ì‘ë‹µ ì†ë„ ë‹¨ì¶•

### 1. ë¬¸ì œ ìƒí™©

ëŒ“ê¸€ ìš”ì•½ ìƒì„± API ìš”ì²­ ì‹œ, **ì‘ë‹µ ì‹œê°„ì´ 6ì´ˆ ì´ìƒ** ì†Œìš”ë˜ëŠ” ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.  
Django Debug Toolbarë¡œ í™•ì¸í•œ ê²°ê³¼, **API í˜¸ì¶œ í•œ ë²ˆì— 500ê°œ ì´ìƒì˜ SQL ì¿¼ë¦¬**ê°€ ì‹¤í–‰ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

---

### 2. ì›ì¸ ë¶„ì„

ì¿¼ë¦¬ ë¡œê·¸ë¥¼ ìƒì„¸íˆ ë¶„ì„í•œ ê²°ê³¼, 500ê°œê°€ ë„˜ëŠ” ì¿¼ë¦¬ì˜ ì´ ì‹¤í–‰ ì‹œê°„(SQL time)ì€ **ì•½ 400msì— ë¶ˆê³¼**í–ˆìŠµë‹ˆë‹¤.  
ì´ë¥¼ í†µí•´ **DB ì„±ëŠ¥ì´ ì•„ë‹Œ, Django ORM ì˜¤ë²„í—¤ë“œ**ê°€ ë³‘ëª©ì˜ ì›ì¸ì„ì„ ì¶”ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

#### ğŸ“Œ ê·¼ë³¸ ì›ì¸

- `Serializer`ì˜ `ManyToManyField` ìœ íš¨ì„± ê²€ì‚¬ ê³¼ì •ì—ì„œ **N+1 ì¿¼ë¦¬ ë¬¸ì œ** ë°œìƒ
- ëŒ“ê¸€ ID ëª©ë¡ì„ ê°œë³„ì ìœ¼ë¡œ `SELECT`í•˜ì—¬ ìœ íš¨ì„± ê²€ì‚¬ ìˆ˜í–‰
- ëŒ“ê¸€ ìˆ˜ë§Œí¼ **ë¶ˆí•„ìš”í•œ DB ì ‘ê·¼**ì´ ë°œìƒ

---

### 3. í•´ê²° ê³¼ì •

ë‹¨ìˆœ ì¿¼ë¦¬ ìµœì í™”ë¥¼ ë„˜ì–´ì„œ **ë°ì´í„° ëª¨ë¸ë§ì˜ ì ì ˆì„±**ì„ ì¬ê²€í† í–ˆìŠµë‹ˆë‹¤.

#### ğŸ” ìš”êµ¬ì‚¬í•­ ì¬ì •ì˜

- ëª©í‘œ: **ìš”ì•½ ìƒì„± ì‹œì ì˜ ëŒ“ê¸€ ëª©ë¡**ì„ ì €ì¥
- í•„ìš” ì—†ìŒ: ëŒ“ê¸€ â†’ ìš”ì•½ ì—­ì°¸ì¡°

#### ğŸ› ï¸ í•´ê²° ë°©ë²•

- ì‹¤ì‹œê°„ ê´€ê³„ë¥¼ ìœ„í•œ `ManyToManyField` â†’ ê³¼ë„í•œ ì„¤ê³„

  ì „

  ![alt text](image-4.png)

  í›„

  ![alt text](image-3.png)

- â†’ `JSONField`ë¡œ ë³€ê²½í•˜ì—¬ **ëŒ“ê¸€ ID ë¦¬ìŠ¤íŠ¸ë¥¼ Snapshot ë°©ì‹ìœ¼ë¡œ ì €ì¥**
- ì´ë¥¼ í†µí•´ DjangoëŠ” ë” ì´ìƒ ë¬´ê²°ì„± ê²€ì¦ì„ ìœ„í•œ ìˆ˜ë°± ê°œì˜ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê²Œ ë¨

---

### 4. ê°œì„  ê²°ê³¼

![alt text](image-1.png)

![alt text](image-5.png)

| í•­ëª©             | ê°œì„  ì „     | ê°œì„  í›„         | ë¹„ê³                                             |
| ---------------- | ----------- | --------------- | ----------------------------------------------- |
| â±ï¸ API ì‘ë‹µ ì‹œê°„ | ì•½ 6000ms   | **300ms ë‚´ì™¸**  | ì•½ **20ë°° ì„±ëŠ¥ í–¥ìƒ**                           |
| ğŸ”„ SQL ì¿¼ë¦¬ ìˆ˜   | 500ê°œ ì´ìƒ  | **4ê°œ**         |                                                 |
| ğŸ§· ë°ì´í„° ë¬´ê²°ì„± | ì‹¤ì‹œê°„ ì°¸ì¡° | **ìŠ¤ëƒ…ìƒ· ë³´ì¡´** | ì›ë³¸ ëŒ“ê¸€ ìˆ˜ì •/ì‚­ì œì™€ ë¬´ê´€í•˜ê²Œ ìš”ì•½ ë°ì´í„° ìœ ì§€ |

ğŸ’¡ _ê²°ê³¼ì ìœ¼ë¡œ, JSON ê¸°ë°˜ Snapshot ì „ëµì€ ì„±ëŠ¥ì„ ëŒ€í­ í–¥ìƒì‹œì¼°ì„ ë¿ ì•„ë‹ˆë¼,  
ë°ì´í„°ì˜ ì—­ì‚¬ì  ë¬´ê²°ì„±ë„ í•¨ê»˜ ê°•í™”í•˜ëŠ” íš¨ê³¼ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤._

---

### Bulk Updateë¡œ ëŒ“ê¸€ ê°ì • ë¶„ì„ ì„±ëŠ¥ ê°œì„ 

#### ğŸ¯ ìµœì í™” ëŒ€ìƒ: ëŒ“ê¸€ ê°ì • ë¶„ì„ ê²°ê³¼ ì €ì¥

ëŒ“ê¸€ ê°ì • ë¶„ì„ APIì—ì„œ LLM ë¶„ì„ ê²°ê³¼ë¥¼ ê°œë³„ ëŒ“ê¸€ì— ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ì„±ëŠ¥ ë³‘ëª©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

#### ğŸ“Š ë¬¸ì œ ìƒí™©

**ê°œì„  ì „ - ê°œë³„ Save ë°©ì‹:**

```python
# Nê°œì˜ ëŒ“ê¸€ = Në²ˆì˜ UPDATE ì¿¼ë¦¬
for item in parsed_result.get("response", []):
    comment = Comment.objects.get(id=item["id"])
    comment.ai_emotion_score = item["score"]
    comment.ai_reason = item["reason"]
    comment.is_ai_processed = True
    comment.ai_processed_at = timezone.now()
    comment.save()  # ê°œë³„ UPDATE ì¿¼ë¦¬ ì‹¤í–‰
```

**ì„±ëŠ¥ ì´ìŠˆ:**

- 100ê°œ ëŒ“ê¸€ ë¶„ì„ ì‹œ â†’ **100ë²ˆì˜ ê°œë³„ UPDATE ì¿¼ë¦¬**
- ê° ì¿¼ë¦¬ë§ˆë‹¤ DB ì™•ë³µ ë¹„ìš© ë°œìƒ
- íŠ¸ëœì­ì…˜ ì˜¤ë²„í—¤ë“œ ëˆ„ì 

#### ğŸš€ í•´ê²° ë°©ë²•: Bulk Update íŒ¨í„´

```python
def _update_comments_with_analysis(
    self, parsed_result: EmotionResponse, comments_map: dict
) -> List[Comment]:
    """ë¶„ì„ ê²°ê³¼ë¡œ ëŒ“ê¸€ ì •ë³´ ì—…ë°ì´íŠ¸"""
    comments_to_update = []

    for item in parsed_result.get("response", []):
        comment_id = item.get("id")
        comment = comments_map.get(comment_id)  # ë©”ëª¨ë¦¬ì—ì„œ ì¡°íšŒ

        if comment:
            # ë©”ëª¨ë¦¬ìƒì—ì„œ ê°ì²´ ìˆ˜ì •
            comment.ai_emotion_score = item.get("score")
            comment.ai_reason = item.get("reason")
            comment.is_ai_processed = True
            comment.ai_processed_at = timezone.now()
            comments_to_update.append(comment)

    return comments_to_update

def _bulk_update_comments(self, comments_to_update: List[Comment]) -> None:
    """ëŒ“ê¸€ ì •ë³´ ì¼ê´„ ì—…ë°ì´íŠ¸"""
    if not comments_to_update:
        return

    # ë‹¨ì¼ ì¿¼ë¦¬ë¡œ ëª¨ë“  ëŒ“ê¸€ ì—…ë°ì´íŠ¸
    Comment.objects.bulk_update(
        comments_to_update,
        [
            "ai_emotion_score",
            "ai_reason",
            "is_ai_processed",
            "ai_processed_at",
        ],
    )
    logger.info(f"{len(comments_to_update)}ê°œ ëŒ“ê¸€ ê°ì • ë¶„ì„ ì™„ë£Œ")
```

#### ğŸ“ˆ ì„±ëŠ¥ ê°œì„  ê²°ê³¼

| í•­ëª©            | ê°œì„  ì „             | ê°œì„  í›„  | ê°œì„  íš¨ê³¼              |
| --------------- | ------------------- | -------- | ---------------------- |
| **SQL ì¿¼ë¦¬ ìˆ˜** | Nê°œ (ëŒ“ê¸€ ìˆ˜ë§Œí¼)   | **1ê°œ**  | ì•½ **100ë°° ê°ì†Œ**      |
| **DB íŠ¸ëœì­ì…˜** | Në²ˆ                 | **1ë²ˆ**  | íŠ¸ëœì­ì…˜ ì˜¤ë²„í—¤ë“œ ì œê±° |
| **ì‘ë‹µ ì‹œê°„**   | ëŒ“ê¸€ ìˆ˜ì— ë¹„ë¡€ ì¦ê°€ | **ì¼ì •** | í™•ì¥ì„± í™•ë³´            |

![alt text](image-6.png)
![alt text](image-7.png)

#### ğŸ¯ í•µì‹¬ ìµœì í™” í¬ì¸íŠ¸

1. **ë©”ëª¨ë¦¬ ê¸°ë°˜ ì²˜ë¦¬**: ì´ë¯¸ ì¡°íšŒëœ ëŒ“ê¸€ ê°ì²´ë¥¼ `comments_map`ìœ¼ë¡œ ì¬í™œìš©
2. **ë°°ì¹˜ ì²˜ë¦¬**: ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ ë©”ëª¨ë¦¬ì—ì„œ ì¤€ë¹„ í›„ í•œ ë²ˆì— DB ë°˜ì˜
3. **ë‹¨ì¼ íŠ¸ëœì­ì…˜**: `bulk_update`ë¡œ ì›ìì„± ë³´ì¥í•˜ë©´ì„œ ì„±ëŠ¥ í™•ë³´

#### ğŸ’¡ êµí›ˆ

**ê°œë³„ ì €ì¥ vs Bulk ì—°ì‚°**

- ì†ŒëŸ‰ ë°ì´í„°: ê°œë³„ ì €ì¥ë„ ë¬´ê´€
- **ëŒ€ëŸ‰ ë°ì´í„°**: Bulk ì—°ì‚° í•„ìˆ˜
- Django ORMì˜ `bulk_update`, `bulk_create` ì ê·¹ í™œìš©

ì´ëŸ¬í•œ ìµœì í™”ë¥¼ í†µí•´ **ëŒ“ê¸€ ìˆ˜ê°€ ì¦ê°€í•´ë„ ì¼ì •í•œ ì„±ëŠ¥**ì„ ìœ ì§€í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

# database

```sql
 -- postgres ì»¨í…Œì´ë„ˆì— ì ‘ì†
docker exec -it postgres_db psql -U postgres
docker exec -it django_app bash


 -- ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ ë³´ê¸°
\l

-- postgres ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†
\c postgres

-- í…Œì´ë¸” ëª©ë¡ ë³´ê¸°
\dt

-- ì›í•˜ëŠ” ì¿¼ë¦¬ ì‹¤í–‰
SELECT * FROM your_table;
```

# docker

```bash
# ì»¨í„°ì´ë„ˆ ë¡œê·¸ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ê¸°
docker logs -f django_app
```

# GraphQL

1. ğŸ” cursor

- ì˜ë¯¸: í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ ê³ ìœ í•œ ìœ„ì¹˜ í‘œì‹œì.

- ì—­í• : ì´ì „/ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ê¸°ì¤€ì´ ë˜ëŠ” "í¬ì¸í„°"

ë„¤, ì§€ê¸ˆê¹Œì§€ íŒŒì•…í•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ  
**ì‹ ì… ê°œë°œì ìê¸°ì†Œê°œ(êµ¬í˜„ì‚¬í•­ ì¤‘ì‹¬, Swagger UI í¬í•¨)** ì˜ˆì‹œë¥¼ ì•„ë˜ì™€ ê°™ì´ ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤.

---

### ì‹ ì… ê°œë°œì ìê¸°ì†Œê°œ (êµ¬í˜„ì‚¬í•­ ì¤‘ì‹¬)

ì €ëŠ” ëŒ“ê¸€ ë¶„ì„ í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ ê°œë°œì„ ë‹´ë‹¹í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

---

#### 1. Django & PostgreSQL ê¸°ë°˜ ë°±ì—”ë“œ êµ¬ì¶•

- Django í”„ë ˆì„ì›Œí¬ë¥¼ í™œìš©í•˜ì—¬ í”„ë¡œì íŠ¸ì˜ ì „ì²´ ë°±ì—”ë“œ êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ì‹¤ì œ ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ë™í•˜ì—¬, ëŒ“ê¸€ ë° ì‚¬ìš©ì ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥Â·ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
- Django ORMì„ ì´ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ë™ ë° CRUD ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

#### 2. ìš”ì²­ ê¸°ë°˜ í¬ë¡¤ëŸ¬ ì—°ë™

- í¬ë¡¤ëŸ¬ ëª¨ë“ˆì„ ê°œë°œí•˜ì—¬, ì‚¬ìš©ìì˜ ìš”ì²­ì´ ìˆì„ ë•Œë§ˆë‹¤ ì™¸ë¶€ ì‚¬ì´íŠ¸ì—ì„œ ëŒ“ê¸€ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ìˆ˜ì§‘ëœ ë°ì´í„°ëŠ” Django ëª¨ë¸ì„ í†µí•´ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë˜ë©°, ë°ì´í„°ì˜ ì‹ ë¢°ì„±ê³¼ ì¼ê´€ì„±ì„ í™•ë³´í•˜ì˜€ìŠµë‹ˆë‹¤.

#### 3. ì‚¬ìš©ì ì¸ì¦ ë° ê´€ë¦¬ ê¸°ëŠ¥

- ì‚¬ìš©ì íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“± ì¸ì¦ ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í•˜ì˜€ìœ¼ë©°, JWT(Json Web Token) ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì„ ì ìš©í•˜ì—¬ ë³´ì•ˆì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.
- Djangoì˜ Custom User ëª¨ë¸ì„ ì ìš©í•˜ì—¬, ì„œë¹„ìŠ¤ì— ë§ëŠ” ì‚¬ìš©ì ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„í•˜ì˜€ìŠµë‹ˆë‹¤.

#### 4. RESTful API ë° Swagger UI ë¬¸ì„œí™”

- Django REST Frameworkë¥¼ í™œìš©í•˜ì—¬ ëŒ“ê¸€, ì‚¬ìš©ì ë“± ì£¼ìš” ê¸°ëŠ¥ì— ëŒ€í•œ RESTful APIë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- APIì˜ ëª…í™•í•œ ì‚¬ìš©ë²•ê³¼ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Swagger UI(drf_yasg, drf_spectacular)ë¥¼ ë„ì…í•˜ì˜€ìœ¼ë©°,  
  ì´ë¥¼ í†µí•´ ê°œë°œì ë° í˜‘ì—…ìë“¤ì´ APIë¥¼ ì‰½ê²Œ ì´í•´í•˜ê³  í™œìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

#### 5. Docker í™˜ê²½ êµ¬ì„±

- Dockerfileê³¼ docker-compose.ymlì„ ì‘ì„±í•˜ì—¬, ê°œë°œ ë° ë°°í¬ í™˜ê²½ì˜ ì¼ê´€ì„±ì„ í™•ë³´í•˜ì˜€ìŠµë‹ˆë‹¤.
- Django ì„œë²„ì™€ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ê´€ë¦¬í•˜ì—¬, ëˆ„êµ¬ë‚˜ ì†ì‰½ê²Œ ë™ì¼í•œ í™˜ê²½ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

---

### ì„±ì¥ í¬ì¸íŠ¸

ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ Djangoì™€ PostgreSQLì„ í™œìš©í•œ ì‹¤ì „ ë°±ì—”ë“œ ê°œë°œ ê²½í—˜ì„ ìŒ“ì•˜ìœ¼ë©°,  
RESTful API ì„¤ê³„, JWT ì¸ì¦, Swagger UI ê¸°ë°˜ì˜ API ë¬¸ì„œí™”, Docker í™˜ê²½ êµ¬ì„± ë“±  
ì‹¤ë¬´ì—ì„œ ìš”êµ¬ë˜ëŠ” ë‹¤ì–‘í•œ ê¸°ìˆ ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ë©° ë°±ì—”ë“œ ê°œë°œìë¡œì„œì˜ ì—­ëŸ‰ì„ í‚¤ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

**ì˜ˆì‹œ ë¬¸êµ¬(ì§§ê²Œ ìš”ì•½):**

> "ì €ëŠ” Djangoì™€ PostgreSQLì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ëŒ“ê¸€ ë¶„ì„ í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ ê°œë°œì„ ë‹´ë‹¹í•˜ì˜€ìœ¼ë©°, ìš”ì²­ ê¸°ë°˜ í¬ë¡¤ëŸ¬, JWT ì¸ì¦, Swagger UIë¥¼ í†µí•œ API ë¬¸ì„œí™”, Docker í™˜ê²½ êµ¬ì„± ë“± ì‹¤ë¬´ì— í•„ìš”í•œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤."

---

í•„ìš”ì— ë”°ë¼ ìœ„ ë‚´ìš©ì„ ìê¸°ì†Œê°œì„œ, í¬íŠ¸í´ë¦¬ì˜¤, ë©´ì ‘ ë‹µë³€ ë“±ì— ë§ê²Œ ì¡°ì •í•´ì„œ ì‚¬ìš©í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤!  
ë” êµ¬ì²´ì ì¸ ì½”ë“œ ì˜ˆì‹œë‚˜, ê°•ì¡°í•˜ê³  ì‹¶ì€ êµ¬í˜„ í¬ì¸íŠ¸ê°€ ìˆë‹¤ë©´ ì¶”ê°€ë¡œ ë§ì”€í•´ ì£¼ì„¸ìš”.

ì¢‹ìŠµë‹ˆë‹¤. `drf` (Django REST framework, DRF)ëŠ” Djangoì—ì„œ API ì„œë²„ë¥¼ ë§Œë“¤ ë•Œ ê±°ì˜ í•„ìˆ˜ì ì¸ ê°•ë ¥í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.
ì—¬ê¸°ì„œëŠ” DRFë¥¼ **ì²˜ìŒ ì„¤ì¹˜í•˜ê³  ê¸°ë³¸ ì„¸íŒ…**í•˜ëŠ” ê³¼ì •ì„ ì•ˆë‚´ë“œë¦´ê²Œìš”.

---

# í˜ì´ì§€ ë„¤ì´ì…˜

## âœ… 3ë‹¨ê³„: DRF ê¸°ë³¸ ì„¤ì • (ì„ íƒ)

`settings.py` í•˜ë‹¨ì— ì¶”ê°€:

```python
REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.LimitOffsetPagination',
    'PAGE_SIZE': 20,
}
```

ì´ë ‡ê²Œ í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ `limit=20`ìœ¼ë¡œ ì‘ë™í•˜ë©°, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ `limit`ê³¼ `offset`ì„ ë°›ì„ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

> ğŸ‘‰ ì´ ì„¤ì •ì€ `GenericAPIView`ë‚˜ `ListAPIView`ì²˜ëŸ¼ DRFì˜ generic view ê¸°ë°˜ì¼ ë•Œ ìë™ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

---

## âœ… 4ë‹¨ê³„: ê¸°ë³¸ ë·° ì‚¬ìš© ì˜ˆì‹œ

```python
from rest_framework.generics import ListAPIView
from .models import Episode
from .serializers import EpisodeSerializer

class EpisodeListView(ListAPIView):
    queryset = Episode.objects.all()
    serializer_class = EpisodeSerializer
```

ì´ ë·°ëŠ” ì´ì œ ë‹¤ìŒê³¼ ê°™ì´ ì‘ë™í•©ë‹ˆë‹¤:

```http
GET /api/episodes?limit=10&offset=30
```

---

## âœ… 5ë‹¨ê³„: Swagger ì„¸íŒ… (ì„ íƒ)

`urls.py`ì— Swagger UI ì¶”ê°€:

```python
from drf_yasg.views import get_schema_view
from drf_yasg import openapi
from rest_framework import permissions

schema_view = get_schema_view(
   openapi.Info(
      title="API ë¬¸ì„œ",
      default_version='v1',
      description="Swagger ë¬¸ì„œ ì˜ˆì‹œ",
   ),
   public=True,
   permission_classes=(permissions.AllowAny,),
)

urlpatterns = [
    ...
    path('swagger/', schema_view.with_ui('swagger', cache_timeout=0), name='schema-swagger-ui'),
]
```

ì´ì œ `/swagger/`ë¡œ ë“¤ì–´ê°€ë©´ ìë™ API ë¬¸ì„œë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”.

---

## âœ… ì •ë¦¬

| ë‹¨ê³„ | ì‘ì—…                                       |
| ---- | ------------------------------------------ |
| â‘     | `pip install djangorestframework drf-yasg` |
| â‘¡    | `INSTALLED_APPS`ì— ë“±ë¡                    |
| â‘¢    | `settings.py`ì— `REST_FRAMEWORK` ì„¤ì • ì¶”ê°€ |
| â‘£    | `ListAPIView` ì‚¬ìš©í•´ ê¸°ë³¸ pagination ì§€ì›  |
| â‘¤    | Swagger ë¬¸ì„œë¥¼ `/swagger/`ì— ì¶”ê°€ (ì„ íƒ)   |

---

ì›í•˜ì‹œë©´ ì§€ê¸ˆ í•˜ê³  ê³„ì‹  ì—í”¼ì†Œë“œ APIë¥¼ `ListAPIView` ê¸°ë°˜ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒë„ ë„ì™€ë“œë¦´ê²Œìš”.
ê·¸ë¦¬ê³  `pagination_class`ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•´ì„œ `max_limit` ì œí•œì„ ë„£ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
